<!DOCTYPE html>
<head>
  <title>Goong APIs</title>
  <meta charset='utf-8'/>
  <meta name='description' content='Documentation website'/>
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
  <link href='assets.css' rel='stylesheet' type='text/css'>
</head>
<body>  
  <nav id='sidebar'>
	<h1>Goong APIs</h1>
<ul id='links'>
  
    
  
    
  
    
  
    
    <li><a href='#/User'>User</a></li>
    
  
    
    <li><a href='#/Requirements'>Requirements</a></li>
    
  
    
    <li><a href='#/Models'>Models</a></li>
    
  
    
    <li><a href='#/Marker'>Marker</a></li>
    
  
    
    <li><a href='#/Hostname'>Host name</a></li>
    
  
    
    <li><a href='#/Home'>Home</a></li>
    
  
    
    <li><a href='#/Geo-service'>Geo Service</a></li>
    
  
    
    <li><a href='#/File'>File</a></li>
    
  
    
    <li><a href='#/Client'>Client</a></li>
    
  
    
  
    
  
    
  
    
  
  
  <li><h2>Stuff</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/get-stuff'>Get stuff</a></li>
              
        <li class='POST'><a href='#/post-a-thing'>Post a thing</a></li>
              
        <li class='PUT'><a href='#/put-a-thing'>Update a thing</a></li>
              
        <li class='DELETE'><a href='#/delete-a-thing'>Delete a thing</a></li>
      
    
    </ul>
  </li>

  <li><h2>Authentication</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='POST'><a href='#/authentication-register'>Register</a></li>
              
        <li class='POST'><a href='#/authentication-login'>Login</a></li>
              
        <li class='POST'><a href='#/authentication-facebook'>Login via facebook</a></li>
      
    
    </ul>
  </li>

</ul>
</nav>

<section id='content'>

  <article class='POST'>
    <a name='/authentication-register' href='#/authentication-register'><h2><code><b>POST</b> _posts/2016-06-10-authentication-register.md</code> Register</h2></a>
    <section class='body'>
      <h3 id="request">Request</h3>

<p><code>{
    username: 'My username',
    email: 'My email',
    password: '***',
    password_confirmation: '***'
}</code></p>

<ul>
  <li>Extra
<code>
{
  phone_number: 'Number phone',
  full_name: 'Full name'
}
</code>
### Response</li>
</ul>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code>
<code>
{
    "success": true,
    "message": "Register successful",
    "userId": "546cd4615468610a680e0000",
    "username": "pmint93",
    "email": "phamminhthanh69@gmail.com",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOiI1NDZjZDQ2MTU0Njg2MTBhNjgwZTAwMDAiLCJpYXQiOjE0MTY0MTg0MDEsImV4cCI6MTQyMTYwMjQwMX0.Y1tXSGruMDUa180H8AH1dqEgnQjIN9A5nYq4ZTzOBok"
}
</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.
```</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/authentication-login' href='#/authentication-login'><h2><code><b>POST</b> _posts/2016-06-10-authentication-login.md</code> Login</h2></a>
    <section class='body'>
      <h3 id="request">Request</h3>

<p><code>{
    username: 'username',
    password: '***'
}</code></p>

<h3 id="response">Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code>
<code>
{
    "success": true,
    "userId": "546cd4615468610a680e0000",
    "message": "Login successful",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOiI1NDZjZDQ2MTU0Njg2MTBhNjgwZTAwMDAiLCJpYXQiOjE0MTY0MTg3NzUsImV4cCI6MTQyMTYwMjc3NX0.qPKPPJpux64Bg5--5xjecMGCCkPIsmymCJlzvZyNrPo",
    "username": "pmint93",
    "email": "phamminhthanh69@gmail.com"
}
</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/authentication-facebook' href='#/authentication-facebook'><h2><code><b>POST</b> _posts/2016-06-10-authentication-facebook.md</code> Login via facebook</h2></a>
    <section class='body'>
      <h3 id="request">Request</h3>

<p><code>{
    fbId: 'id',
    email: 'email'
}</code></p>

<ul>
  <li>Extra</li>
</ul>

<pre><code>{
    username: 'username',
    phone_number: 'phone_number',
    full_name: 'full_name',
    avatar: 'avatar'
}
</code></pre>

<h3 id="response">Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code>
With non-existed user:
<code>{
    "success": true,
    "userId": "546cd87c5468610e4b000000",
    "username": null,
    "email": "phamminhthanh6d9@gmail.com",
    "message": "New account (Facebook) created!",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOiI1NDZjZDg3YzU0Njg2MTBlNGIwMDAwMDAiLCJpYXQiOjE0MTY0MTk0NTIsImV4cCI6MTQyMTYwMzQ1Mn0.fkj8Kr2icFZeJ2mBaoKXnHQnbGeSOZ0OfSzTtDD6c4w"
}
</code>
With existed user:
<code>{
    "success": true,
    "userId": "546cd87c5468610e4b000000",
    "username": null,
    "email": "phamminhthanh6d9@gmail.com",
    "message": "Account (Facebook) existed. Updated user info &amp; logged in!",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOiI1NDZjZDg3YzU0Njg2MTBlNGIwMDAwMDAiLCJpYXQiOjE0MTY0MTk1MjksImV4cCI6MTQyMTYwMzUyOX0.1sRmxsx9E0SJDCiWKDClDRp54JZE5LmjRTRmlUWmOCM"
}
</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class=''>
    <a name='/User' href='#/User'><h2>User</h2></a>
    <section class='body'>
      <h2 id="user-api">User API</h2>

<p><code>Path: ./app/controllers/user_controller.rb</code></p>

<ul>
  <li>Get profile
<code>sh
Method: get_profile
Route: GET http://localhost:3000/user/get_profile
Success:
{
  "success": true,
  "data": {
      "_id": "5497ec1a5468615b38000000",
      "avatar": "5497ec1a5468615b38000000.jpg",
      "created_at": "2014-12-22T17:02:02.585+07:00",
      "email": "root@to.or",
      "full_name": null,
      "is_banned": false,
      "phone_number": null,
      "total_like": 0,
      "total_star": 0,
      "updated_at": "2014-12-23T18:13:01.612+07:00",
      "username": "root",
      "has_password": true
  }
}
</code></li>
  <li>View profile
<code>sh
Method: view_profile
Params: userId
Route: GET http://localhost:3000/user/view_profile
Success:
{
  "success": true,
  "data": {
      "avatar": "5497ec1a5468615b38000000.jpg",
      "full_name": null,
      "is_banned": false,
      "total_like": 0,
      "username": "root",
      "_id": "5497ec1a5468615b38000000"
  }
}
</code></li>
  <li>Update profile
<code>sh
Method update_profile
Route: PUT http://localhost:3000/user/update_profile
Params: username, phone_number, full_name, fbId, :avatar (, email, password )
Success:
{
  "success": true,
  "message": "Thông tin đã được cập nhật",
  "user": {
      "_id": "5486ca4154686177c4000000",
      "avatar": null,
      "be_reported": 1,
      "created_at": "2014-12-09T17:09:05.530+07:00",
      "email": "seeder@seeding.com",
      "full_name": "seeder",
      "is_banned": false,
      "phone_number": null,
      "total_like": 0,
      "total_star": 0,
      "updated_at": "2014-12-22T15:42:32.477+07:00",
      "username": "seeder",
      "has_password": true
  }
}
</code></li>
  <li>
    <p>Change password
<code>sh
Method change_password
Route: PUT http://localhost:3000/user/change_password
Params: password, newPassword, confirmPassword
Success:
{
  "success": true,
  "message": "Password has been updated",
  "user": {
      "_id": "5497ec1a5468615b38000000",
      "avatar": "5497ec1a5468615b38000000.jpg",
      "created_at": "2014-12-22T17:02:02.585+07:00",
      "email": "root@to.or",
      "full_name": null,
      "is_banned": false,
      "phone_number": null,
      "total_like": 0,
      "total_star": 0,
      "updated_at": "2014-12-23T18:13:01.612+07:00",
      "username": "root",
      "has_password": true
  }
}
</code></p>
  </li>
  <li>Get avatar
<code>sh
Method get_avatar
Route: GET http://localhost:3000/user/avatar/:userId
Success: (IMAGE)
</code></li>
</ul>

    </section>
  </article>

  <article class=''>
    <a name='/Requirements' href='#/Requirements'><h2>Requirements</h2></a>
    <section class='body'>
      <h2 id="add-onsplugins-needed-for-gong-backend">Add-ons/Plugins Needed for gong-backend</h2>
<p>===========</p>

<ul>
  <li>Install Rails gems
<code>sh
bundle
</code></li>
  <li>to start server (puma)
<code>sh
rails s
</code></li>
</ul>


    </section>
  </article>

  <article class=''>
    <a name='/Models' href='#/Models'><h2>Models</h2></a>
    <section class='body'>
      <h2 id="model">Model</h2>
<p>In this project, we are using Mongoid 4 as MongoDB driver since Active Record is not supported, and has been removed</p>

<ul>
  <li>
    <p>To create a simple model
```sh
class User
include Mongoid::Document     # To declare a Mongoid class
include Mongoid::Timestamps   # To include timestamps to this class
self.include_root_in_json = true/fasle    # Toggle json root, default false, does not change unless required</p>

    <p>field :email, type: String
field :password_digest, type: String
field :display_name, type: String
field :facebook, type: String</p>

    <h1 id="to-serialize-json-call-asjson-after-object-ex-userasjson">To serialize json, call as_json after object (ex: user.as_json)</h1>
    <p># Using as_json because Mongoid does not support active_model_serializers
def as_json(options = nil)
  json = super({only: [:_id, :email, :display_name, :facebook]})
  json[‘has_password’] = !password_digest.nil?
  json
end
end
```</p>
  </li>
</ul>

    </section>
  </article>

  <article class=''>
    <a name='/Marker' href='#/Marker'><h2>Marker</h2></a>
    <section class='body'>
      <h2 id="marker-api">Marker API</h2>

<p><code>Path: ./app/controllers/marker_controller.rb</code></p>

<ul>
  <li>Get markers
```sh
Method: get_markers
Route: GET http://localhost:3000/marker/get_markers
Params: locationLat, locationLng, radius[, markerType, markerCategory]</li>
  <li>Optional params to pagination: page, [ limit(default:1)]</li>
  <li>Optional params to sector select: direction, angle</li>
  <li>
    <p>Optional params to name filter: looklike (trái|phải|tốc độ)
Success:
{
  “success”: true,
  “markers”: [
      {
          “description”: {
              “address”: “Huyện Quảng Ninh, Quảng Bình”,
              “district”: “Huyện Quảng Ninh”,
              “info_review”: “PHONE() FAX() WEBSITE() MAIL()”,
              “number”: null,
              “province”: “Quảng Bình”,
              “street”: null
          },
          “dislike_count”: 0,
          “expired_at”: null,
          “geo_near_distance”: 4.000355602329364e-9,
          “like_count”: 449,
          “lng_lat”: [
              106.69686404244,
              17.3425737605719
          ],
          “name”: “Cây xăng”,
          “published_at”: “2015-01-12T12:45:44.949+07:00”,
          “marker_type”: {
              “code”: “XD”,
              “description”: null,
              “enable_dislike”: true,
              “name”: “Cây xăng”
          },
          “_id”: “54b35f88676f6e67a2000000”,
          “marker_type_id”: “5497f0a1676f6e0571180000”,
          “user_id”: “549cd708676f6e03a7000000”
      },
      {
          “description”: {
              “address”: “Huyện Quảng Ninh, Quảng Bình”,
              “district”: null,
              “info_review”: null,
              “number”: null,
              “province”: null,
              “street”: null
          },
          “dislike_count”: 0,
          “expired_at”: null,
          “geo_near_distance”: 1.2922972364278158,
          “like_count”: 5,
          “lng_lat”: [
              106.703218419095,
              17.3313209781806
          ],
          “name”: “Trung tâm Y tế Gia Ninh”,
          “published_at”: “2014-12-22T17:25:08.862+07:00”,
          “marker_type”: {
              “code”: “BV”,
              “description”: null,
              “enable_dislike”: false,
              “name”: “Nhà thuốc, bệnh viện, cơ sở y tế”
          },
          “_id”: “5497f184676f6e06241b1500”,
          “marker_type_id”: “5497f0a1676f6e0571170000”,
          “user_id”: “5497f0c0676f6e05a1000000”
      }
  ]
}
```</p>
  </li>
  <li>Within box
```sh
Method: within_box
Route: GET http://localhost:3000/marker/within_box
Params: locationLat(Max/Min), locationLng(Max/Min)</li>
  <li>Optional params to filter: markerType, markerCategory</li>
  <li>Optional params to pagination: page, [ limit(default:1)]</li>
  <li>
    <p>Optional params to name filter: looklike (trái|phải|tốc độ)
Success:
{
  “success”: true,
  “markers”: [
      {
          “description”: {
              “address”: “Tỉnh lộ 334, Huyện Vân Đồn, Quảng Ninh”,
              “district”: null,
              “info_review”: null,
              “number”: null,
              “province”: null,
              “street”: null
          },
          “dislike_count”: 0,
          “expired_at”: null,
          “like_count”: 38,
          “lng_lat”: [
              107.442814541258,
              21.0867587259344
          ],
          “name”: “Trạm Y tế xã Hạ Long”,
          “published_at”: “2014-12-22T17:25:21.897+07:00”,
          “marker_type”: {
              “code”: “BV”,
              “description”: null,
              “enable_dislike”: false,
              “name”: “Nhà thuốc, bệnh viện, cơ sở y tế”
          },
          “_id”: “5497f191676f6e0624971c00”,
          “marker_type_id”: “5497f0a1676f6e0571170000”,
          “user_id”: “5497f0c0676f6e05a1000000”
      },
      {
          “description”: {
              “address”: “Huyện Cô Tô, Quảng Ninh”,
              “district”: null,
              “info_review”: null,
              “number”: null,
              “province”: null,
              “street”: null
          },
          “dislike_count”: 0,
          “expired_at”: null,
          “like_count”: 189,
          “lng_lat”: [
              107.753458317447,
              20.9892930867066
          ],
          “name”: “Trạm Y tế xã Đồng Tiến”,
          “published_at”: “2014-12-22T17:25:58.720+07:00”,
          “marker_type”: {
              “code”: “BV”,
              “description”: null,
              “enable_dislike”: false,
              “name”: “Nhà thuốc, bệnh viện, cơ sở y tế”
          },
          “_id”: “5497f1b6676f6e0624c42f00”,
          “marker_type_id”: “5497f0a1676f6e0571170000”,
          “user_id”: “5497f0c0676f6e05a1000000”
      }
  ]
}
```</p>
  </li>
  <li>
    <p>Set marker
<code>sh
Method: set_marker
Route: POST http://localhost:3000/marker/set_marker
Params: name, locationLng, locationLat, markerType,
      description_addess, description_info_review, description_number....
      image_avatar, image_slide
Location not shared yet:
{
  "success": true,
  "message": "Cảm ơn bạn đã chia sẻ, địa điểm đã được duyệt tự động, +3 điểm !"
}
Location is shared yet, get bonus share:
{
  "success": true,
  "message": "Địa điểm này đã có người chia sẻ, bạn được +1 điểm"
}
</code></p>
  </li>
  <li>
    <p>Get marker detail
<code>sh
Method: get_marker_detail
Route: GET http://localhost:3000/marker/get_marker_detail
Params: id
Success:
{
  "success": true,
  "data": {
      "_id": "5497ed005468615b4cbb4d00",
      "created_at": "2014-12-22T17:05:52.249+07:00",
      "description": {
          "_id": {
              "$oid": "5497ed005468615b4cbc4d00"
          },
          "address": "3 Lý Thái Tổ, Thành phố Lạng Sơn, Lạng Sơn",
          "district": null,
          "info_review": null,
          "number": null,
          "province": null,
          "street": null
      },
      "like_count": 249,
      "lng_lat": [
          106.761781989247,
          21.8458173238104
      ],
      "marker_type_id": "5497ec2a5468615b3d150000",
      "name": "ATM Agribank",
      "star_point": 3,
      "status": "ACCEPT",
      "updated_at": "2014-12-22T17:05:52.249+07:00",
      "user_id": "5497ec1a5468615b38000000"
  },
  "created_by": {
      "avatar": "5497ec1a5468615b38000000.jpg",
      "full_name": null,
      "username": "root",
      "_id": "5497ec1a5468615b38000000"
  },
  "comments": [
      {
          "content": "dddd",
          "created_at": "2014-12-26T11:23:30.021+07:00",
          "user": {
              "avatar": null,
              "created_at": "2014-12-26T11:15:35.480+07:00",
              "full_name": "name_4",
              "username": "user_4"
          },
          "_id": "549ce2c254686108b4010000",
          "marker_id": "5497ec955468615b4c551500",
          "user_id": "549ce0e7546861088a050000"
      }
  ],
  "likes": [
      {
          "_id": {
              "$oid": "549ce0e7546861088a050000"
          },
          "avatar": null,
          "full_name": "name_4",
          "username": "user_4"
      }
  ],
  "reports": [
      {
          "created_at": "2014-12-26T14:22:45.426+07:00",
          "processed": false,
          "report_type": {
              "code": "EMPTY",
              "created_at": "2014-12-24T14:49:35.969+07:00",
              "name": "Không tồn tại"
          },
          "user": {
              "avatar": "5497ec1a5468615b38000000.jpg",
              "created_at": "2014-12-22T17:02:02.585+07:00",
              "full_name": null,
              "username": "root"
          },
          "_id": "549d0ca55468610dc1010000",
          "report_type_id": "549a700f5468611126000000",
          "marker_id": "5497ec955468615b4c551500",
          "user_id": "5497ec1a5468615b38000000"
      }
  ],
  "liked": true
}
</code></p>
  </li>
  <li>
    <p>Like toggle
<code>sh
Method: like_toggle
Route: POST http://localhost:3000/marker/like_toggle
Params: id
Success:
{
  "message": "Success",
  "liked": true,
  "success": true
}
</code></p>
  </li>
  <li>
    <p>Dislike toggle
<code>sh
Method: dislike_toggle
Route: POST http://localhost:3000/marker/dislike_toggle
Params: id, comment
Success:
{
  "message": "Success",
  "disliked": true,
  "success": true
}
</code></p>
  </li>
  <li>Report
```sh
Method: report
Route: POST http://localhost:3000/marker/report
Params: type, id (type in [‘EMPTY’, ‘REMOVE’])</li>
  <li>Optional params: new_name (required for type:NWRONG)</li>
  <li>Optional params: new_lat, new_lng (required for type:PWRONG),
                 description_addess, description_info_review, description_number….</li>
  <li>
    <p>Optional params: new_speed (required for type:SWRONG)
Success:
{
 “success”: true,
 “Message”:”Success”
}
```</p>
  </li>
  <li>
    <p>Get Reports
<code>sh
Method: get_reports
Route: GET http://localhost:3000/marker/get_reports
Params: id (marker_id)
Success:
{
  "success": true,
  "reports": [
      {
          "_id": "5477fd4b546861099f130000",
          "created_at": "2014-11-28T04:42:51.525Z",
          "marker_change": {
              "_id": {
                  "$oid": "5477fd4b546861099f140000"
              },
              "lng_lat": null,
              "name": null
          },
          "marker_id": "5477fd4b546861099f0c0000",
          "processed": false,
          "report_type_id": "5477fd4b546861099f060000",
          "updated_at": "2014-11-28T04:42:51.525Z",
          "user_id": "5477fd4b546861099f020000"
      }
  ]
}
</code></p>
  </li>
  <li>
    <p>Get Comments
<code>sh
Method: get_comments
Route: GET http://localhost:3000/marker/get_comments
Params: id (marker_id)
Success:
{
  "success": true,
  "comments": [
      {
          "_id": "5477ef96546861076f0d0000",
          "content": "this is comment #1 from user: name_2",
          "marker_id": "5477ef96546861076f0c0000",
          "user_id": "5477ef96546861076f030000"
      },
      {
          "_id": "5477ef96546861076f100000",
          "content": "this is comment #2 from user: name_1",
          "marker_id": "5477ef96546861076f0c0000",
          "user_id": "5477ef96546861076f020000"
      }
  ]
}
</code></p>
  </li>
  <li>Add Comment
<code>sh
Method: add_comment
Route: POST http://localhost:3000/marker/comment
Params: marker_id, content
Success:
{
  "success": true,
  "message": "Bạn vừa mới bình luận thành công",
  "comment": {
      "_id": "5493d8c454686121f4010000",
      "content": "hello, comment",
      "created_at": "2014-12-19T14:50:28.364+07:00",
      "marker_id": "5486ca4154686177c40c0000",
      "updated_at": "2014-12-19T14:50:28.364+07:00",
      "user_id": "5486ca4154686177c4000000"
  }
}
</code></li>
</ul>

    </section>
  </article>

  <article class=''>
    <a name='/Hostname' href='#/Hostname'><h2>Host name</h2></a>
    <section class='body'>
      <h3 id="marker-apis">Marker APIs</h3>

<p>http://123.31.16.139/</p>

    </section>
  </article>

  <article class=''>
    <a name='/Home' href='#/Home'><h2>Home</h2></a>
    <section class='body'>
      <h2 id="welcome-to-the-gong-backend-wiki">Welcome to the gong-backend wiki!</h2>
<ol>
  <li><a href="#">File Structure</a></li>
  <li>
    <p><a href="https://github.com/phongmh307/gong-backend/milestones">Milestones</a>
&gt; Milestones là các cột mốc bao gồm các gói công việc chính mình sẽ phải hoàn thành trước thời gian
&gt; được xác định trước, mọi người căn cứ vào thời gian của Milestones đó và các issues được tag để sắp
&gt; xếp thời gian cho công việc của mình.</p>
  </li>
  <li><a href="https://github.com/phongmh307/gong-backend/wiki/Requirements">Requirements</a></li>
  <li><a href="https://github.com/phongmh307/gong-backend/wiki/Models">Model</a></li>
  <li>APIs</li>
</ol>

<blockquote>
  <ul>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/Authentication">Authentication</a></li>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/User">User</a></li>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/Marker">Marker</a></li>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/Geo-service">Geo Service</a></li>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/File">File service</a></li>
    <li><a href="https://github.com/phongmh307/gong-backend/wiki/Client">Client</a></li>
  </ul>
</blockquote>

    </section>
  </article>

  <article class=''>
    <a name='/Geo-service' href='#/Geo-service'><h2>Geo Service</h2></a>
    <section class='body'>
      <h2 id="geoservice-api">GeoService API</h2>

<p><code>Path: ./app/controllers/geo_service_ntroller.rb</code></p>

<ul>
  <li>Get address
<code>sh
Method: get_address
Route: GET http://localhost:3000/geoservice/get_address
Params: locationLat, locationLng
Success:
{
  "success": true,
  "result": "Xã Giáp Đắt, Huyện Đà Bắc, Hòa Bình"
}
</code></li>
  <li>
    <p>Get speed limit
<code>sh
Method: get_speed_limit
Route: GET http://localhost:3000/geoservice/get_speed_limit
Params: locationLat, locationLng
Success:
{
  "success": true,
  "road_name": "Đường vào Thuần Mỹ",
  "speed_limit" :30
}
</code></p>
  </li>
  <li>
    <p>Speed report
<code>sh
Method: speed_report
Route: POST http://localhost:3000/geoservice/speed_report
Params: locationLat, locationLng, speed
Success:
{
  "success": true,
  "message": "Báo cáo thành công, cảm ơn bạn"
}
</code></p>
  </li>
  <li>Filter Address
```sh
Method: filter_address
Route: GET http://goong.io/geoservice/filter_address
Params:
—&gt; Tier 1 address: Province, City, District, Commune: tier1
—&gt; Tier 2 address: address, house number, place: tier2 &amp; (province_id || district_id || commune_id) (Get from tier1 result, get the strongest params available: Commune &gt; District &gt; Province)
Success:
http://goong.io/geoservice/filter_address?tier1=thanh hoa
[
  {
      “_id”: 401,
      “district_id”: null,
      “lng_lat”: {
          “lng”: 105.777746698,
          “lat”: 19.8102073580001
      },
      “name_en”: “thanh hoa”,
      “name_vn”: “Thanh Hóa”,
      “province_id”: null
  },
  {
      “_id”: 80111,
      “district_id”: null,
      “lng_lat”: {
          “lng”: 106.181309681,
          “lat”: 10.656036139
      },
      “name_en”: “thanh hoa”,
      “name_vn”: “Huyện Thạnh Hóa”,
      “province_id”: 801,
      “province_name”: “Long An”
  },
  {
      “_id”: 40101,
      “district_id”: null,
      “lng_lat”: {
          “lng”: 105.781267908,
          “lat”: 19.816956878
      },
      “name_en”: “thanh hoa”,
      “name_vn”: “Thành phố Thanh Hóa”,
      “province_id”: 401,
      “province_name”: “Thanh Hóa”
  },
  {
      “_id”: 70911,
      “district_id”: null,
      “lng_lat”: {
          “lng”: 106.130158864,
          “lat”: 11.288101413
      },
      “name_en”: “hoa thanh”,
      “name_vn”: “Huyện Hòa Thành”,
      “province_id”: 709,
      “province_name”: “Tây Ninh”
  },
  {
      “_id”: 4070305,
      “district_id”: 40703,
      “district_name”: “Huyện Tuyên Hóa”,
      “lng_lat”: {
          “lng”: 105.841942958,
          “lat”: 17.9829163320001
      },
      “name_en”: “thanh hoa”,
      “name_vn”: “Xã Thanh Hóa”,
      “province_id”: 407,
      “province_name”: “Quảng Bình”
  },
  {
      “_id”: 4070503,
      “district_id”: 40705,
      “district_name”: “Huyện Minh Hóa”,
      “lng_lat”: {
          “lng”: 105.831761988,
          “lat”: 17.8899632790001
      },
      “name_en”: “hoa thanh”,
      “name_vn”: “Xã Hóa Thanh”,
      “province_id”: 407,
      “province_name”: “Quảng Bình”
  },
  {
      “_id”: 4033109,
      “district_id”: 40331,
      “district_name”: “Huyện Thanh Chương”,
      “lng_lat”: {
          “lng”: 105.238767852,
          “lat”: 18.8403404900001
      },
      “name_en”: “thanh hoa”,
      “name_vn”: “Xã Thanh Hòa”,
      “province_id”: 403,
      “province_name”: “Nghệ An”
  },
  {
      “_id”: 4032329,
      “district_id”: 40323,
      “district_name”: “Huyện Yên Thành”,
      “lng_lat”: {
          “lng”: 105.494026942,
          “lat”: 19.0021521190001
      },
      “name_en”: “hoa thanh”,
      “name_vn”: “Xã Hoa Thành”,
      “province_id”: 403,
      “province_name”: “Nghệ An”
  },
  {
      “_id”: 5091225,
      “district_id”: 50912,
      “district_name”: “Huyện Đông Hòa”,
      “lng_lat”: {
          “lng”: 109.300807059,
          “lat”: 13.0334629500001
      },
      “name_en”: “hoa thanh”,
      “name_vn”: “Xã Hòa Thành”,
      “province_id”: 509,
      “province_name”: “Phú Yên”
  },
  {
      “_id”: 6052507,
      “district_id”: 60525,
      “district_name”: “Huyện Krông Bông”,
      “lng_lat”: {
          “lng”: 108.301682452,
          “lat”: 12.5656724990001
      },
      “name_en”: “hoa thanh”,
      “name_vn”: “Xã Hòa Thành”,
      “province_id”: 605,
      “province_name”: “Đắk Lắk”
  }
]</li>
</ul>

<p>http://goong.io/geoservice/filter_address?tier2=nguyen trai&amp;district_id=10111
[
    {
        “_id”: 11135,
        “commune_id”: 1011111,
        “commune_name”: “Phường Thanh Xuân Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.80669061,
            “lat”: 20.99409436
        },
        “name_en”: “nguyen trai”,
        “name_vn”: “Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 58422,
        “commune_id”: 1011103,
        “commune_name”: “Phường Khương Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.81959702,
            “lat”: 21.00235638
        },
        “name_en”: “47 nguyen trai”,
        “name_vn”: “47 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 59848,
        “commune_id”: 1011111,
        “commune_name”: “Phường Thanh Xuân Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.80378462,
            “lat”: 20.99215394
        },
        “name_en”: “506 nguyen trai”,
        “name_vn”: “506 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 59849,
        “commune_id”: 1011111,
        “commune_name”: “Phường Thanh Xuân Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.80372551,
            “lat”: 20.99215009
        },
        “name_en”: “508 nguyen trai”,
        “name_vn”: “508 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 59850,
        “commune_id”: 1011103,
        “commune_name”: “Phường Khương Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.8199637,
            “lat”: 21.002612
        },
        “name_en”: “23 nguyen trai”,
        “name_vn”: “23 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 60106,
        “commune_id”: 1011103,
        “commune_name”: “Phường Khương Trung”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.81951221,
            “lat”: 21.00228863
        },
        “name_en”: “49a nguyen trai”,
        “name_vn”: “49A Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 61950,
        “commune_id”: 1011119,
        “commune_name”: “Phường Thanh Xuân Nam”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.79753067,
            “lat”: 20.98729314
        },
        “name_en”: “509 nguyen trai”,
        “name_vn”: “509 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 61951,
        “commune_id”: 1011119,
        “commune_name”: “Phường Thanh Xuân Nam”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.79747463,
            “lat”: 20.9872535
        },
        “name_en”: “513 nguyen trai”,
        “name_vn”: “513 Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 61952,
        “commune_id”: 1011119,
        “commune_name”: “Phường Thanh Xuân Nam”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.79719286,
            “lat”: 20.98705421
        },
        “name_en”: “521k nguyen trai”,
        “name_vn”: “521K Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    },
    {
        “_id”: 61953,
        “commune_id”: 1011119,
        “commune_name”: “Phường Thanh Xuân Nam”,
        “district_id”: 10111,
        “district_name”: “Quận Thanh Xuân”,
        “lng_lat”: {
            “lng”: 105.79716033,
            “lat”: 20.9870312
        },
        “name_en”: “521h nguyen trai”,
        “name_vn”: “521H Nguyễn Trãi”,
        “province_id”: 101,
        “province_name”: “Hà Nội”
    }
]
```</p>

    </section>
  </article>

  <article class=''>
    <a name='/File' href='#/File'><h2>File</h2></a>
    <section class='body'>
      <h2 id="file-api">File API</h2>

<p><code>Path: ./app/controllers/file_controller.rb</code></p>

<ul>
  <li>Upload image
<code>sh
Method: upload
Route: POST http://localhost:3000/files
Params: file(type: file)
Success:
{
  "success": true,
  "message": "Tải lên thành công",
  "data": "62feb9ac0eb43067eec9a2d4948d5e8e1a8379d4.1pmint.jpg"
}
</code></li>
  <li>Get image
```sh
Method: stream
Route: GET http://localhost:3000/files/:file_name
Params: file_name
Success:</li>
</ul>

<p>(IMG DATA)</p>

<p>```</p>

    </section>
  </article>

  <article class=''>
    <a name='/Client' href='#/Client'><h2>Client</h2></a>
    <section class='body'>
      <h2 id="client-api">Client API</h2>

<p><code>Path: ./app/controllers/client_controller.rb</code></p>

<ul>
  <li>
    <p>Share marker
<code>sh
Method: share_marker
Route: GET http://localhost:3000/s/m/:marker_id
Success: Open application with data below
{
  "action": "MK_SHARE",
  "marker": {
      "description": {
          "address": null,
          "district": null,
          "info_review": "123",
          "number": null,
          "province": null,
          "street": null
      },
      "like_count": 0,
      "lng_lat": [
          105.73563743800008,
          20.326369529000033
      ],
      "name": "Giới hạn tốc độ 50",
      "marker_type": {
          "code": "GTD",
          "description": null,
          "name": "Giới hạn tốc độ"
      },
      "_id": "5497ec2e5468615b41000000",
      "marker_type_id": "5497ec2a5468615b3d120000",
      "user_id": "5497ec1a5468615b38000000"
  }
}
</code></p>
  </li>
  <li>
    <p>Share location
<code>sh
Method: share_location
Route: GET http://localhost:3000/s/l/:lng/:lat(/:name)(/:user_id)
Success: Open application with data below
{
  "action": "MK_CUSTOM",
  "name": "Giới hạn tốc độ",
  "lng_lat": [
      105.73563743800008,
      20.326369529000033
  ],
  "location": {
      "success": true,
      "result": "Xã Bát Mọt, Huyện Thường Xuân, Thanh Hóa"
  },
  "user": {
      "avatar": "62feb9ac0eb43067eec9a2d4948d5e8e1a8379d4.pmint.jpg",
      "full_name": null,
      "is_banned": false,
      "total_like": 0,
      "username": "root",
      "_id": "5497ec1a5468615b38000000"
  }
}
</code></p>
  </li>
  <li>
    <p>Share app
<code>sh
Method: install
Route: GET http://localhost:3000/s/install
Success: Open store to install application
</code></p>
  </li>
  <li>
    <p>Version check
<code>sh
Method: check_version
Route: GET http://localhost:3000/version/check
Params: version, platform
Success:
{
  message: "Phiên bản đã được cập nhật mới nhất, v1.3 !",
  version: "1.3"
}
</code></p>
  </li>
</ul>

    </section>
  </article>

  <article class='GET'>
    <a name='/get-stuff' href='#/get-stuff'><h2><code><b>GET</b> _posts/2012-12-27-get-stuff.md</code> Get stuff</h2></a>
    <section class='body'>
      <p>This method allows users to retrieve stuff.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<h3 id="response">Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code>
<code>{
    {
        id: thing_1,
        name: 'My first thing'
    },
    {
        id: thing_2,
        name: 'My second thing'
    }
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/post-a-thing' href='#/post-a-thing'><h2><code><b>POST</b> _posts/2012-12-26-post-a-thing.md</code> Post a thing</h2></a>
    <section class='body'>
      <p>This method allows users to create a new thing.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
  <li><strong>The body can’t be empty</strong> and must include at least the name attribute, a <code>string</code> that will be used as the name of the thing.</li>
</ul>

<p><code>Authentication: bearer TOKEN</code>
<code>{
    name: 'My new thing'
}</code></p>

<h3 id="response">Response</h3>

<p><strong>If succeeds</strong>, returns the created thing.</p>

<p><code>Status: 201 Created</code>
<code>{
    id: new_thing,
    name: 'My new thing'
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='PUT'>
    <a name='/put-a-thing' href='#/put-a-thing'><h2><code><b>PUT</b> _posts/2012-12-25-put-a-thing.md</code> Update a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to retrieve his stuff.</p>

<h3 id="request">Request</h3>

<ul>
  <li><strong><code>:id</code></strong> is the id the thing to update.</li>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
  <li><strong>The body can’t be empty</strong> and must include at least the name attribute, a <code>string</code> that will be used as the name of the thing.</li>
</ul>

<p><code>Authentication: bearer f862f658-ad89-4fcb-995b-7a4c50554ff6</code>
<code>{
    name: 'My new thing'
}</code></p>

<h3 id="response">Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code>
<code>{
    {
        id: thing_1,
        name: 'My first thing'
    },
    {
        id: thing_2,
        name: 'My second thing'
    }
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='DELETE'>
    <a name='/delete-a-thing' href='#/delete-a-thing'><h2><code><b>DELETE</b> _posts/2012-12-24-delete-a-thing.md</code> Delete a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to post a new thing to his stuff.</p>

<h3 id="request">Request</h3>

<ul>
  <li><strong><code>:id</code></strong> is the id the thing to delete.</li>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
  <li><strong>The body is omitted</strong>.</li>
</ul>

<h3 id="response">Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 Deleted</code>
<code>{
    code: 200,
    message: 'Your thing (id: 736) was deleted'
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

</section>

  
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src='assets.js' type='text/javascript'></script>
  <script>require('boot');</script>
</body>
</html>